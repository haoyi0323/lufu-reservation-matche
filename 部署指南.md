# 🚀 鹭府预定匹配工具 - 云端部署指南

## 📋 部署方案概览

本项目支持多种云端部署方案，推荐按以下优先级选择：

1. **Streamlit Cloud** - 最简单，专为Streamlit应用设计
2. **Railway** - 现代化，免费额度充足
3. **Heroku** - 经典选择，稳定可靠
4. **Docker + 云服务器** - 完全控制，适合生产环境

---

## 🌟 方案一：Streamlit Cloud（推荐）

### 优点
- 完全免费
- 专为Streamlit优化
- 自动部署
- 无需配置

### 部署步骤

1. **准备代码仓库**
   ```bash
   # 确保代码已推送到GitHub
   git add .
   git commit -m "准备云端部署"
   git push origin main
   ```

2. **访问Streamlit Cloud**
   - 打开 [share.streamlit.io](https://share.streamlit.io)
   - 使用GitHub账号登录

3. **部署应用**
   - 点击"New app"
   - 选择你的GitHub仓库
   - 设置主文件路径：`streamlit_app.py`
   - 点击"Deploy"

4. **配置环境变量**
   - 在应用设置中添加必要的环境变量
   - 等待部署完成

---

## 🚂 方案二：Railway

### 优点
- 现代化平台
- 免费额度充足
- 自动HTTPS
- 易于扩展

### 部署步骤

1. **安装Railway CLI**
   ```bash
   npm install -g @railway/cli
   ```

2. **登录Railway**
   ```bash
   railway login
   ```

3. **初始化项目**
   ```bash
   railway init
   ```

4. **部署应用**
   ```bash
   railway up
   ```

5. **获取部署URL**
   ```bash
   railway domain
   ```

---

## 🎯 方案三：Heroku

### 优点
- 稳定可靠
- 免费额度
- 生态完善

### 部署步骤

1. **安装Heroku CLI**
   - 下载并安装 [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)

2. **登录Heroku**
   ```bash
   heroku login
   ```

3. **创建应用**
   ```bash
   heroku create your-app-name
   ```

4. **设置环境变量**
   ```bash
   heroku config:set STREAMLIT_SERVER_PORT=$PORT
   heroku config:set STREAMLIT_SERVER_ADDRESS=0.0.0.0
   ```

5. **部署应用**
   ```bash
   git push heroku main
   ```

6. **打开应用**
   ```bash
   heroku open
   ```

---

## 🐳 方案四：Docker + 云服务器

### 优点
- 完全控制
- 适合生产环境
- 可自定义配置

### 部署步骤

1. **准备云服务器**
   - 选择云服务商（阿里云、腾讯云、AWS等）
   - 创建Ubuntu/CentOS实例

2. **安装Docker**
   ```bash
   curl -fsSL https://get.docker.com -o get-docker.sh
   sudo sh get-docker.sh
   sudo usermod -aG docker $USER
   ```

3. **部署应用**
   ```bash
   # 克隆代码
   git clone <your-repo-url>
   cd <project-directory>
   
   # 构建并运行
   docker-compose up -d
   ```

4. **配置域名和HTTPS**
   - 配置Nginx反向代理
   - 使用Let's Encrypt配置SSL证书

---

## 🔧 部署前检查清单

- [ ] 代码已推送到Git仓库
- [ ] `requirements.txt` 包含所有依赖
- [ ] 配置文件已优化（`.streamlit/config.toml`）
- [ ] 环境变量已设置
- [ ] 端口配置正确（8501）
- [ ] 文件上传路径可写

---

## 🚨 常见问题解决

### 1. 端口冲突
```bash
# 修改.streamlit/config.toml中的端口
port = 8501
```

### 2. 依赖安装失败
```bash
# 更新requirements.txt，指定版本
streamlit==1.28.0
pandas==1.5.0
```

### 3. 文件上传权限
```bash
# 确保上传目录有写权限
chmod 755 ./data
```

### 4. 内存不足
```bash
# 在云平台增加内存配置
# 或优化代码减少内存使用
```

---

## 📊 性能优化建议

1. **数据缓存**
   - 使用Streamlit的缓存装饰器
   - 避免重复计算

2. **文件处理**
   - 限制上传文件大小
   - 使用流式处理大文件

3. **并发处理**
   - 配置适当的worker数量
   - 使用异步处理

---

## 🔒 安全配置

1. **环境变量**
   - 敏感信息使用环境变量
   - 不要硬编码密钥

2. **访问控制**
   - 配置IP白名单
   - 使用身份验证

3. **HTTPS**
   - 强制使用HTTPS
   - 配置安全头部

---

## 📞 技术支持

如遇到部署问题：

1. 检查应用日志
2. 验证配置文件
3. 测试本地运行
4. 查看云平台文档

---

## 🎉 部署完成

部署成功后，你的应用将可以通过公网访问，用户无需安装任何软件即可使用！

**推荐使用Streamlit Cloud，简单快捷！**
